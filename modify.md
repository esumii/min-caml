
CPU実験で配布されたレイトレーサープログラムの, min-camlでコンパイルするために手直ししなければいけないところ
細かい行はずれてるかも
#### 字句解析・構文解析
* 14行目の ```true``` の再定義を可能にする
* 15行目の ```false``` の再定義を可能にする
* -> これらはソースコードを書き換えてもルール上ok!

*  ```;``` がコンパイルできない ```;()``` とかに書き換えられるならコンパイルできるが, ソースコードをいじれないのでパーサを修正
  
  * 1390
  * 1669
  * ..

* 整数乗算 ```*``` がそもそもmin-camlに存在しない
  
  * 1619
  * 1655

* 整数乗算 ```/``` がそもそもmin-camlに存在しない
  * 2292
  * 2293

#### 型
* 651行目で型エラーが起きる.  ```not``` に整数を入れてるので不可避っぽいけど...
  
  * 一回型チェックに通っていた気がするが気がついたらparserが壊れてた. パーサーを治すと型チェックが落ちた
  * ->  ```m_invert``` の定義に使われている ```fisneg``` が miniMLRuntime.mlで定義されているので, 型推論で型変数のまま残った型がIntになってて型エラーになる
    * -> どうする??? 分割コンパイル???
  * と思ったが型エラーの理由はそうではなく, 625行目に```if ... then ttrue else m_invert``` があり, ```ttrue```(true)を1, つまりintにしちゃっているのが原因
    * bool型を全部int型でやっていく? -> 厳しいことがわかった
    * 全部bool型でやっていく -> とりあえずappの型が合わないのでやっていく
      * ->  ```create_array```で落ちてた


#### その他のメモ
* /doc/raytracer にあるtestrt.mlがtrueとfalseだけ書きかえたもの
* これのコンパイルに成功するのがさしあたっての目標
* regAllocでAddとSubに対称性がない
  
  * Addは第二オペランドがレジスタか即値かで場合分けしているがSubは両方レジスタとしてやっている
  * とりあえず場合分けするようにしておく

* PowerPCをコピーしてKomachiを作った. to_komachiもto_ppcからパクった